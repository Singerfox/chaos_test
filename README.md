Эксперимент 1 <br />
Перезагрузка слейв-хоста (планируется перезагрузить ВМ из консоли управления) с patroni и pgsql, после переазгрузки положить сервис patroni на 3-4 минуты. <br />
Воздействия на производительность и доступность сервиса не ожидается <br />
Перезагрузка хоста и отключение patroni никак не повлияли на производительность приложения. <br />

Эксперимент 2 <br />
Перезагрузка master-хоста с patroni и pgsql, после переазгрузки положить сервис patroni на 3-4 минуты.<br />
Преположительно переключение на новый мастер может вызвать незначительные задержки в обработке пользовательских запросов. Возможны незначительные потери пакетов. Значительной деградации производительнсти не ожидается.<br />
В результате перезагрузки ВМ с мастером, произошло автоматическое переключение на вторую ВМ. В этот период наблюдалась небольшая деградация сервиса (выросли задержки сверх ожидаемого, а так же было некоторое количестов 500 ошибок). Такое же поведение системы наблюдалось при выключении мастера patroni (на втором хосте, куда он успел переехать). Всё поведение в рамках ожидаемого.<br />
<img src="/k6_img/Patroni_restarts.png">

Эксперимент 3<br />
Перезагрузка хостов с etcd<br />
Ожидаются перевыборы лидера в кластере etcd, на производительность сервиса влияния не ожидается.<br />
При перезагрузке одной ноды кластера etcd - поведение ожидаемое, прошли перевыборы лидера без негативного воздействия на производительность сервиса. Однако при перезагрузке либо отключении 2 нод кластера одновременно происходит полная деградация системы, так как patroni не может достучаться до хранилища конфигурации и перестаёт отвечать на запросы.<br />
Вывод - для работы кластера etcd нужно минимум 2 ноды.<br />

Эксперимент 4<br />
Нагрузка на CPU хоста с мастером patroni<br />
  blade create cpu load --cpu-percent 100 --timeout 180<br />
Ожидается небольшая деградация производительности, возможно смена мастер-ноды patroni<br />
В реальности ничего не произошло. Ни деградации производительности, ни смены мастера.<br />
Предположительно этом может быть связано с не очень высокой нагрузкой на БД, а также, возможно, не сильно длительным экспериментом.<br />

Эксперимент 5<br />
Нагрузка на память хоста с мастером patroni<br />
blade create mem load --mode ram --mem-percent 95 --timeout 300<br />
Ожидается деградация производительности, смена мастер-ноды patroni<br />
При 95% нагрузке на ОЗУ происходит рестарт сервисов на хосте, в т.ч. и patroni. Деградация такая же, как и при перезагрузке сервера.<br />
